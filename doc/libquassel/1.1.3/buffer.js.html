<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>buffer.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-buffer.IRCBuffer.html">IRCBuffer</a><ul class='methods'><li data-type='method'><a href="module-buffer.IRCBuffer.html#addMessage">addMessage</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#addUser">addUser</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#addUserMode">addUserMode</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#clearMessages">clearMessages</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#devour">devour</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#getBufferInfo">getBufferInfo</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#getFirstMessage">getFirstMessage</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#getLastMessage">getLastMessage</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#hasMode">hasMode</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#hasUser">hasUser</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#isChannel">isChannel</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#isHidden">isHidden</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#isLast">isLast</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#isOp">isOp</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#isStatusBuffer">isStatusBuffer</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#isVoiced">isVoiced</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#removeUser">removeUser</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#removeUserMode">removeUserMode</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#setActive">setActive</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#setName">setName</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#setOrder">setOrder</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#setPermanentlyRemoved">setPermanentlyRemoved</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#setTemporarilyRemoved">setTemporarilyRemoved</a></li><li data-type='method'><a href="module-buffer.IRCBuffer.html#updateUserMaps">updateUserMaps</a></li></ul></li><li><a href="module-buffer.IRCBufferCollection.html">IRCBufferCollection</a><ul class='methods'><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#_computeFilteredBuffers">_computeFilteredBuffers</a></li><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#_isBufferFiltered">_isBufferFiltered</a></li><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#addBuffer">addBuffer</a></li><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#getBuffer">getBuffer</a></li><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#hasBuffer">hasBuffer</a></li><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#moveBuffer">moveBuffer</a></li><li data-type='method'><a href="module-buffer.IRCBufferCollection.html#removeBuffer">removeBuffer</a></li></ul></li><li><a href="module-glouton.Glouton.html">Glouton</a><ul class='methods'><li data-type='method'><a href="module-glouton.Glouton.html#.extend">extend</a></li><li data-type='method'><a href="module-glouton.Glouton.html#devour">devour</a></li></ul></li><li><a href="module-identity.html">identity</a><ul class='methods'><li data-type='method'><a href="module-identity.html#devour">devour</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayEnabled">setAutoAwayEnabled</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayReason">setAutoAwayReason</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayReasonEnabled">setAutoAwayReasonEnabled</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayTime">setAutoAwayTime</a></li><li data-type='method'><a href="module-identity.html#setAwayNick">setAwayNick</a></li><li data-type='method'><a href="module-identity.html#setAwayNickEnabled">setAwayNickEnabled</a></li><li data-type='method'><a href="module-identity.html#setAwayReason">setAwayReason</a></li><li data-type='method'><a href="module-identity.html#setAwayReasonEnabled">setAwayReasonEnabled</a></li><li data-type='method'><a href="module-identity.html#setDetachAwayEnabled">setDetachAwayEnabled</a></li><li data-type='method'><a href="module-identity.html#setDetachAwayReason">setDetachAwayReason</a></li><li data-type='method'><a href="module-identity.html#setDetachAwayReasonEnabled">setDetachAwayReasonEnabled</a></li><li data-type='method'><a href="module-identity.html#setId">setId</a></li><li data-type='method'><a href="module-identity.html#setIdent">setIdent</a></li><li data-type='method'><a href="module-identity.html#setIdentityName">setIdentityName</a></li><li data-type='method'><a href="module-identity.html#setKickReason">setKickReason</a></li><li data-type='method'><a href="module-identity.html#setNicks">setNicks</a></li><li data-type='method'><a href="module-identity.html#setPartReason">setPartReason</a></li><li data-type='method'><a href="module-identity.html#setQuitReason">setQuitReason</a></li><li data-type='method'><a href="module-identity.html#setRealName">setRealName</a></li><li data-type='method'><a href="module-identity.html#update">update</a></li></ul></li><li><a href="module-ignore.IgnoreItem.html">IgnoreItem</a><ul class='methods'><li data-type='method'><a href="module-ignore.IgnoreItem.html#matchIgnore">matchIgnore</a></li><li data-type='method'><a href="module-ignore.IgnoreItem.html#matchScope">matchScope</a></li><li data-type='method'><a href="module-ignore.IgnoreItem.html#revived">revived</a></li></ul></li><li><a href="module-ignore.IgnoreList.html">IgnoreList</a><ul class='methods'><li data-type='method'><a href="module-ignore.IgnoreList.html#export">export</a></li><li data-type='method'><a href="module-ignore.IgnoreList.html#import">import</a></li><li data-type='method'><a href="module-ignore.IgnoreList.html#matches">matches</a></li></ul></li><li><a href="module-libquassel-Quassel.html">Quassel</a><ul class='methods'><li data-type='method'><a href="module-libquassel-Quassel.html#connect">connect</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#createBuffer">createBuffer</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#createIdentity">createIdentity</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#createNetwork">createNetwork</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#disconnect">disconnect</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#dispatch">dispatch</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#getMaxBufferId">getMaxBufferId</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#getNetworks">getNetworks</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#getNetworksMap">getNetworksMap</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#handleInitDataNetwork">handleInitDataNetwork</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#handleMsgType">handleMsgType</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#handleStruct">handleStruct</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#heartBeat">heartBeat</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#init">init</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#login">login</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#removeIdentity">removeIdentity</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#removeNetwork">removeNetwork</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestBacklog">requestBacklog</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestBacklogs">requestBacklogs</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestConnectNetwork">requestConnectNetwork</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestDisconnectNetwork">requestDisconnectNetwork</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestHideBufferPermanently">requestHideBufferPermanently</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestHideBufferTemporarily">requestHideBufferTemporarily</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestMarkBufferAsRead">requestMarkBufferAsRead</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestMergeBuffersPermanently">requestMergeBuffersPermanently</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestRemoveBuffer">requestRemoveBuffer</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestSetLastMsgRead">requestSetLastMsgRead</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestSetMarkerLine">requestSetMarkerLine</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestSetNetworkInfo">requestSetNetworkInfo</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestUnhideBuffer">requestUnhideBuffer</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestUpdateIdentity">requestUpdateIdentity</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#requestUpdateIgnoreListManager">requestUpdateIgnoreListManager</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#sendClientInfo">sendClientInfo</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#sendInitRequest">sendInitRequest</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#sendMessage">sendMessage</a></li><li data-type='method'><a href="module-libquassel-Quassel.html#setupCore">setupCore</a></li></ul></li><li><a href="module-message.IRCMessage.html">IRCMessage</a><ul class='methods'><li data-type='method'><a href="module-message.IRCMessage.html#_updateFlags">_updateFlags</a></li><li data-type='method'><a href="module-message.IRCMessage.html#getHostmask">getHostmask</a></li><li data-type='method'><a href="module-message.IRCMessage.html#getNick">getNick</a></li><li data-type='method'><a href="module-message.IRCMessage.html#isHighlighted">isHighlighted</a></li><li data-type='method'><a href="module-message.IRCMessage.html#isSelf">isSelf</a></li></ul></li><li><a href="module-network.Network.html">Network</a><ul class='methods'><li data-type='method'><a href="module-network.Network.html#.toQ">toQ</a></li><li data-type='method'><a href="module-network.Network.html#addUser">addUser</a></li><li data-type='method'><a href="module-network.Network.html#devour">devour</a></li><li data-type='method'><a href="module-network.Network.html#getBuffer">getBuffer</a></li><li data-type='method'><a href="module-network.Network.html#getBufferCollection">getBufferCollection</a></li><li data-type='method'><a href="module-network.Network.html#getBufferMap">getBufferMap</a></li><li data-type='method'><a href="module-network.Network.html#getStatusBuffer">getStatusBuffer</a></li><li data-type='method'><a href="module-network.Network.html#getUserByNick">getUserByNick</a></li><li data-type='method'><a href="module-network.Network.html#hasNick">hasNick</a></li><li data-type='method'><a href="module-network.Network.html#removeUser">removeUser</a></li><li data-type='method'><a href="module-network.Network.html#renameUser">renameUser</a></li><li data-type='method'><a href="module-network.Network.html#setCodecForDecoding">setCodecForDecoding</a></li><li data-type='method'><a href="module-network.Network.html#setCodecForEncoding">setCodecForEncoding</a></li><li data-type='method'><a href="module-network.Network.html#setCodecForServer">setCodecForServer</a></li><li data-type='method'><a href="module-network.Network.html#setConnected">setConnected</a></li><li data-type='method'><a href="module-network.Network.html#setIrcUsersAndChannels">setIrcUsersAndChannels</a></li><li data-type='method'><a href="module-network.Network.html#setLatency">setLatency</a></li><li data-type='method'><a href="module-network.Network.html#setMyNick">setMyNick</a></li><li data-type='method'><a href="module-network.Network.html#setName">setName</a></li><li data-type='method'><a href="module-network.Network.html#setStatusBuffer">setStatusBuffer</a></li><li data-type='method'><a href="module-network.Network.html#setUserList">setUserList</a></li><li data-type='method'><a href="module-network.Network.html#updateTopic">updateTopic</a></li></ul></li><li><a href="module-network.NetworkCollection.html">NetworkCollection</a><ul class='methods'><li data-type='method'><a href="module-network.NetworkCollection.html#add">add</a></li><li data-type='method'><a href="module-network.NetworkCollection.html#findBuffer">findBuffer</a></li><li data-type='method'><a href="module-network.NetworkCollection.html#get">get</a></li><li data-type='method'><a href="module-network.NetworkCollection.html#removeBuffer">removeBuffer</a></li><li data-type='method'><a href="module-network.NetworkCollection.html#set">set</a></li><li data-type='method'><a href="module-network.NetworkCollection.html#values">values</a></li></ul></li><li><a href="module-user.html">user</a><ul class='methods'><li data-type='method'><a href="module-user.html#devour">devour</a></li><li data-type='method'><a href="module-user.html#setAway">setAway</a></li><li data-type='method'><a href="module-user.html#setEncrypted">setEncrypted</a></li><li data-type='method'><a href="module-user.html#setLastAwayMessage">setLastAwayMessage</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-buffer.html">buffer</a></li><li><a href="module-glouton.html">glouton</a></li><li><a href="module-identity.html">identity</a><ul class='methods'><li data-type='method'><a href="module-identity.html#devour">devour</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayEnabled">setAutoAwayEnabled</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayReason">setAutoAwayReason</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayReasonEnabled">setAutoAwayReasonEnabled</a></li><li data-type='method'><a href="module-identity.html#setAutoAwayTime">setAutoAwayTime</a></li><li data-type='method'><a href="module-identity.html#setAwayNick">setAwayNick</a></li><li data-type='method'><a href="module-identity.html#setAwayNickEnabled">setAwayNickEnabled</a></li><li data-type='method'><a href="module-identity.html#setAwayReason">setAwayReason</a></li><li data-type='method'><a href="module-identity.html#setAwayReasonEnabled">setAwayReasonEnabled</a></li><li data-type='method'><a href="module-identity.html#setDetachAwayEnabled">setDetachAwayEnabled</a></li><li data-type='method'><a href="module-identity.html#setDetachAwayReason">setDetachAwayReason</a></li><li data-type='method'><a href="module-identity.html#setDetachAwayReasonEnabled">setDetachAwayReasonEnabled</a></li><li data-type='method'><a href="module-identity.html#setId">setId</a></li><li data-type='method'><a href="module-identity.html#setIdent">setIdent</a></li><li data-type='method'><a href="module-identity.html#setIdentityName">setIdentityName</a></li><li data-type='method'><a href="module-identity.html#setKickReason">setKickReason</a></li><li data-type='method'><a href="module-identity.html#setNicks">setNicks</a></li><li data-type='method'><a href="module-identity.html#setPartReason">setPartReason</a></li><li data-type='method'><a href="module-identity.html#setQuitReason">setQuitReason</a></li><li data-type='method'><a href="module-identity.html#setRealName">setRealName</a></li><li data-type='method'><a href="module-identity.html#update">update</a></li></ul></li><li><a href="module-ignore.html">ignore</a></li><li><a href="module-libquassel.html">libquassel</a></li><li><a href="module-message.html">message</a></li><li><a href="module-network.html">network</a></li><li><a href="module-requesttype.html">requesttype</a></li><li><a href="module-user.html">user</a><ul class='methods'><li data-type='method'><a href="module-user.html#devour">devour</a></li><li data-type='method'><a href="module-user.html#setAway">setAway</a></li><li data-type='method'><a href="module-user.html#setEncrypted">setEncrypted</a></li><li data-type='method'><a href="module-user.html#setLastAwayMessage">setLastAwayMessage</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.activate%2522">event:"buffer.activate"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.backlog%2522">event:"buffer.backlog"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.deactivate%2522">event:"buffer.deactivate"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.hidden%2522">event:"buffer.hidden"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.lastseen%2522">event:"buffer.lastseen"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.markerline%2522">event:"buffer.markerline"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.merge%2522">event:"buffer.merge"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.message%2522">event:"buffer.message"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.order%2522">event:"buffer.order"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.read%2522">event:"buffer.read"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.remove%2522">event:"buffer.remove"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.rename%2522">event:"buffer.rename"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522buffer.unhide%2522">event:"buffer.unhide"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522channel.addusermode%2522">event:"channel.addusermode"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522channel.join%2522">event:"channel.join"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522channel.removeusermode%2522">event:"channel.removeusermode"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522channel.topic%2522">event:"channel.topic"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522coreinfo%2522">event:"coreinfo"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522coreinfoinit%2522">event:"coreinfoinit"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522error%2522">event:"error"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522identities.init%2522">event:"identities.init"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522identity.new%2522">event:"identity.new"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522identity.remove%2522">event:"identity.remove"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522identity%2522">event:"identity"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522ignorelist%2522">event:"ignorelist"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522init%2522">event:"init"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522login%2522">event:"login"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522loginfailed%2522">event:"loginfailed"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.addbuffer%2522">event:"network.addbuffer"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.adduser%2522">event:"network.adduser"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.autoidentify.password%2522">event:"network.autoidentify.password"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.autoidentify.service%2522">event:"network.autoidentify.service"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.autoreconnect.interval%2522">event:"network.autoreconnect.interval"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.autoreconnect.retries%2522">event:"network.autoreconnect.retries"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.codec.decoding%2522">event:"network.codec.decoding"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.codec.encoding%2522">event:"network.codec.encoding"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.codec.server%2522">event:"network.codec.server"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.connected%2522">event:"network.connected"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.connectionstate%2522">event:"network.connectionstate"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.disconnected%2522">event:"network.disconnected"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.identity%2522">event:"network.identity"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.init%2522">event:"network.init"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.latency%2522">event:"network.latency"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.mynick%2522">event:"network.mynick"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.networkname%2522">event:"network.networkname"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.new%2522">event:"network.new"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.perform%2522">event:"network.perform"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.rejoinchannels%2522">event:"network.rejoinchannels"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.remove%2522">event:"network.remove"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.sasl.account%2522">event:"network.sasl.account"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.sasl.password%2522">event:"network.sasl.password"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.server%2522">event:"network.server"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.serverlist%2522">event:"network.serverlist"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.unlimitedreconnectretries%2522">event:"network.unlimitedreconnectretries"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.userrenamed%2522">event:"network.userrenamed"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522network.usesasl%2522">event:"network.usesasl"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522setup%2522">event:"setup"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522setupfailed%2522">event:"setupfailed"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522setupok%2522">event:"setupok"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522user.away%2522">event:"user.away"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522user.part%2522">event:"user.part"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522user.quit%2522">event:"user.quit"</a></li><li><a href="module-libquassel-Quassel.html#event:event:%2522user.realname%2522">event:"user.realname"</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">buffer.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
 * libquassel
 * https://github.com/magne4000/node-libquassel
 *
 * Copyright (c) 2016 JoÃ«l Charles
 * Licensed under the MIT license.
 */

/** @module buffer */

var Glouton = require('./glouton'),
    logger = require('debug', 'libquassel:buffer'),
    IRCMessage = require('./message').IRCMessage,
    util = require('qtdatastream').util;

/**
 * BufferInfo object representation
 * @typedef {Object} BufferInfo
 * @property {number} id
 * @property {number} network
 * @property {number} type
 * @property {number} group
 * @property {String} name
 */

/**
 * @class
 * @alias module:buffer.IRCBuffer
 * @augments module:glouton.Glouton
 */
var IRCBuffer = function IRCBuffer(id, data) {
    this.devour(data);
    /** @member {number} */
    this.id = id;
    /**
     * Map of users of this channel.
     * The Map keys are users nicknames `String`, the values is an Object with 2 attributes:
     *  * value.user {@link module:user}
     *  * value.modes `String`
     * @member {Map}
     */
    this.users = new Map;
    /**
     * Map of messages in this buffer.
     * The Map keys are message IDs {@type number}, the values {@type message/IRCMessage}
     * @member {Map}
     */
    this.messages = new Map;
    /** @member {boolean} */
    this.active = false;
    /**
     * @member {boolean}
     * @protected
     */
    this._isStatusBuffer = false;
    /**
     * @member {boolean}
     * @protected
     */
    this._lastMessageId = null;
    /**
     * @member {boolean}
     * @protected
     */
    this._firstMessageId = null;
    /**
     * @member {?number}
     */
    this.order = null;
    if (this.type == IRCBuffer.Types.StatusBuffer) {
        this._isStatusBuffer = true;
    }
};

Glouton.extend(IRCBuffer);

function _userAndModes(user, modes) {
    return {
        user: user,
        modes: modes
    };
}

/**
 * Switch buffer state
 * @param {boolean} bool
 */
IRCBuffer.prototype.setActive = function(bool) {
    this.active = bool;
};

/**
 * Set buffer index
 * @param {number} order
 */
IRCBuffer.prototype.setOrder = function(order) {
    this.order = order;
};

/**
 * Is this buffer a channel
 * @returns {boolean}
 */
IRCBuffer.prototype.isChannel = function() {
    return this.name &amp;&amp; "#&amp;+!".indexOf(this.name[0]) !== -1;
};

/**
 * Add user to buffer
 * @param {module:user} user
 * @param {string} modes
 */
IRCBuffer.prototype.addUser = function(user, modes) {
    if (user &amp;&amp; typeof user.nick === "string") {
        this.users.set(user.nick, _userAndModes(user, modes));
    }
};

/**
 * Add mode to user
 * @param {module:user} user
 * @param {string} mode
 */
IRCBuffer.prototype.addUserMode = function(user, mode) {
    if (user &amp;&amp; typeof user.nick === "string") {
        var userAndModes = this.users.get(user.nick);
        if (userAndModes) userAndModes.modes += mode;
    }
};

/**
 * Returns true if user has specified mode
 * @param {string} nick
 * @param {string} mode
 * @returns {boolean}
 */
IRCBuffer.prototype.hasMode = function(nick, mode) {
    var userAndModes = this.users.get(nick);
    if (userAndModes &amp;&amp; typeof userAndModes.modes === "string") {
        return userAndModes.modes.indexOf(mode) !== -1;
    }
    return false;
};

/**
 * Returns true if user is chan operator
 * @param {string} nick
 * @returns {boolean}
 */
IRCBuffer.prototype.isOp = function(nick) {
    return this.hasMode('o');
};

/**
 * Returns true if user is voiced
 * @param {string} nick
 * @returns {boolean}
 */
IRCBuffer.prototype.isVoiced = function(nick) {
    return this.hasMode('v');
};

/**
 * remove mode from user
 * @param {module:user} user
 * @param {string} mode
 */
IRCBuffer.prototype.removeUserMode = function(user, mode) {
    if (user &amp;&amp; typeof user.nick === "string") {
        var userAndModes = this.users.get(user.nick);
        if (userAndModes) userAndModes.modes = userAndModes.modes.replace(mode, "");
    }
};

/**
 * Check if current buffer contains specified user
 * @param {(string|module:user)} nick
 * @returns {?boolean}
 */
IRCBuffer.prototype.hasUser = function(nick) {
    if (typeof nick === 'undefined' || nick === null) {
        logger("User should not be null or undefined");
        return null;
    }
    if (typeof nick.nick === 'string') {
        nick = nick.nick;
    }
    return this.users.has(nick);
};

/**
 * Remove user from buffer
 * @param {(string|module:user)} nick
 */
IRCBuffer.prototype.removeUser = function(nick) {
    if (typeof nick.nick === 'string') {
        nick = nick.nick;
    }
    this.users.delete(nick);
};

/**
 * Update user maps hashes with current .nick
 * @param {string} oldnick
 */
IRCBuffer.prototype.updateUserMaps = function(oldnick) {
    var userAndModes = this.users.get(oldnick);
    if (oldnick !== userAndModes.user.nick) {
        this.users.set(userAndModes.user.nick, userAndModes);
        this.users.delete(oldnick);
    }
};

/**
 * Add message to buffer
 * @param {*} message
 * @returns {?message/IRCMessage} the message, if successfully added, null otherwise
 */
IRCBuffer.prototype.addMessage = function(message) {
    message.id = parseInt(message.id, 10);
    if (this._lastMessageId === null || this._lastMessageId &lt; message.id) {
        this._lastMessageId = message.id;
    }
    if (this._firstMessageId === null || this._firstMessageId > message.id) {
        this._firstMessageId = message.id;
    }
    if (this.messages.has(message.id)) {
        return null;
    }
    var ircmsg = new IRCMessage(message);
    this.messages.set(message.id, ircmsg);
    return ircmsg;
};

/**
 * Clear buffer messages
 */
IRCBuffer.prototype.clearMessages = function() {
    this._lastMessageId = null;
    this._firstMessageId = null;
    this.messages.clear();
};

/**
 * Check if specified messageId is the last one of this buffer
 * @param {*} messageId
 * @returns {boolean}
 */
IRCBuffer.prototype.isLast = function(messageId) {
    messageId = parseInt(messageId, 10);
    return this._lastMessageId === messageId;
};

/**
 * get the first message (sorted by id)
 * @param {*} messageId
 * @returns {message/IRCMessage}
 */
IRCBuffer.prototype.getFirstMessage = function() {
    return this.messages.get(this._firstMessageId);
};

/**
 * get the last message (sorted by id)
 * @param {*} messageId
 * @returns {message/IRCMessage}
 */
IRCBuffer.prototype.getLastMessage = function() {
    return this.messages.get(this._lastMessageId);
};

/**
 * Name setter
 * @param {string} name
 */
IRCBuffer.prototype.setName = function(name) {
    this.name = name ? name.toString() : null;
};

/**
 * get BufferInfo structure
 * @returns {BufferInfo}
 */
IRCBuffer.prototype.getBufferInfo = function() {
    return {
        id: this.id,
        network: this.network,
        type: this.type,
        group: this.group || 0,
        name: this.name
    };
};

/**
 * Returns true if this buffer is a StatusBuffer
 * If param is specified, acts as a setter.
 * @param {boolean} bool
 * @returns {boolean}
 */
IRCBuffer.prototype.isStatusBuffer = function(bool) {
    if (typeof bool === "undefined")
        return this._isStatusBuffer;
    else
        this._isStatusBuffer = bool;
};

/**
 * Flag the buffer as temporarily removed
 * @param {boolean} flag
 */
IRCBuffer.prototype.setTemporarilyRemoved = function(flag) {
    this.isTemporarilyRemoved = flag;
};

/**
 * Flag the buffer as permanently removed
 * @param {boolean} flag
 */
IRCBuffer.prototype.setPermanentlyRemoved = function(flag) {
    this.isPermanentlyRemoved = flag;
};

/**
 * Is the buffer hidden/removed (permanently or temporarily)
 * @returns {boolean}
 */
IRCBuffer.prototype.isHidden = function() {
    return this.isPermanentlyRemoved || this.isTemporarilyRemoved;
};

/**
 * A collection of buffers
 * @class
 * @alias module:buffer.IRCBufferCollection
 */
var IRCBufferCollection = function IRCBufferCollection() {
    /** @member {Map} */
    this.buffers = new Map;
    /** @member {Map} */
    this.filteredBuffers = new Map;
};

/**
 * Add a buffer to this collection
 * @param {IRCBuffer} buffer
 */
IRCBufferCollection.prototype.addBuffer = function(buffer) {
    if (this.buffers.has(buffer.id)) {
        logger("Buffer already added (" + buffer.name + ")");
        return;
    }
    this.buffers.set(buffer.id, buffer);
    this._computeFilteredBuffers();
};

/**
 * Is the specified buffer hidden
 * @param {IRCBuffer} buffer
 * @protected
 * @returns {boolean}
 */
IRCBufferCollection.prototype._isBufferFiltered = function(buffer) {
    return buffer.isPermanentlyRemoved || buffer.isTemporarilyRemoved;
};

/**
 * Get the buffer by name if bufferId is a `String`, by id otherwise
 * @param {(number|string|Buffer)} bufferId
 * @returns {?Buffer}
 */
IRCBufferCollection.prototype.getBuffer = function(bufferId) {
    var buffer;
    if (bufferId instanceof Buffer) {
        bufferId = util.str(bufferId);
    }
    if (typeof bufferId === 'string') {
        bufferId = bufferId.toLowerCase();
        var buffers = this.buffers.values();
        buffer = buffers.next();
        while(!buffer.done) {
            if (typeof buffer.value.name === 'string' &amp;&amp; buffer.value.name.toLowerCase() === bufferId) {
                return buffer.value;
            }
            buffer = buffers.next();
        }
    } else {
        // number
        buffer = this.buffers.get(bufferId);
        if (typeof buffer !== 'undefined') {
            return buffer;
        }
    }
    return null;
};

/**
 * Does the buffer exists in this collection
 * @param {(number|string|Buffer)} bufferId
 * @returns {boolean}
 */
IRCBufferCollection.prototype.hasBuffer = function(bufferId) {
    if (typeof bufferId === 'string' || bufferId instanceof Buffer) {
        return this.getBuffer(bufferId) !== null;
    } else {
        return this.buffers.has(bufferId);
    }
};

/**
 * Remove buffer
 * @param {(number|string)} bufferId
 */
IRCBufferCollection.prototype.removeBuffer = function(bufferId) {
    var buffer = this.getBuffer(bufferId);
    if (buffer) {
        this.buffers.delete(buffer.id);
    }
};


/**
 * Change buffer id
 * @param {Buffer} buffer
 * @param {(number|string)} bufferIdTo
 */
IRCBufferCollection.prototype.moveBuffer = function(buffer, bufferIdTo) {
    var bufferIdFrom = buffer.id;
    this.buffers.set(bufferIdTo, buffer);
    buffer.id = bufferIdTo;
    this.buffers.delete(bufferIdFrom);
};

/**
 * Update filteredBuffers attribute
 * @protected
 */
IRCBufferCollection.prototype._computeFilteredBuffers = function() {
    var buffers = this.buffers.values(), buffer, has;
    buffer = buffers.next();
    while(!buffer.done) {
        has = this.filteredBuffers.has(buffer.value.id);
        if (this._isBufferFiltered(buffer.value)){
            if (!has) {
                this.filteredBuffers.set(buffer.value.id, buffer.value);
            }
        } else {
            if (has) {
                this.filteredBuffers.delete(buffer.value.id);
            }
        }
        buffer = buffers.next();
    }
};

/**
 * @alias module:buffer.IRCBuffer.Types
 * @readonly
 * @enum {number}
 * @default
 */
IRCBuffer.Types = {
    InvalidBuffer: 0x00,
    StatusBuffer: 0x01,
    ChannelBuffer: 0x02,
    QueryBuffer: 0x04,
    GroupBuffer: 0x08
};

exports.IRCBuffer = IRCBuffer;
exports.IRCBufferCollection = IRCBufferCollection;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Thu Apr 28 2016 11:11:55 GMT+0200 (CEST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
